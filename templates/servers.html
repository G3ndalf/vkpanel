{% extends "base.html" %}

{% block title %}–°–µ—Ä–≤–µ—Ä—ã ‚Äî VK IP Panel{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <h1>üñ• –°–µ—Ä–≤–µ—Ä—ã</h1>
</div>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ -->
<div class="card">
    <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</h2>
    <form method="POST" action="/servers/add">
        <div class="form-row">
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" name="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: vps-1" required>
            </div>
            <div class="form-group">
                <label>–•–æ—Å—Ç (IP)</label>
                <input type="text" name="host" placeholder="192.168.1.1" required>
            </div>
            <div class="form-group">
                <label>–ü–æ—Ä—Ç SSH</label>
                <input type="number" name="port" value="22">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                <input type="text" name="user" placeholder="root" required>
            </div>
            <div class="form-group">
                <label>–ü–∞—Ä–æ–ª—å</label>
                <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å SSH">
            </div>
        </div>
        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</button>
    </form>
</div>

<!-- –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ -->
<div class="card">
    <h2>üìã –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤</h2>
    
    {% if servers %}
    <table>
        <thead>
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–•–æ—Å—Ç</th>
                <th>–ü–æ—Ä—Ç</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–°–∫—Ä–∏–ø—Ç–æ–≤</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for server in servers %}
            <tr>
                <td><strong>{{ server.name }}</strong></td>
                <td><code class="ip-code">{{ server.host }}</code></td>
                <td>{{ server.port }}</td>
                <td>{{ server.user }}</td>
                <td>{{ server.scripts|length if server.scripts else 0 }}</td>
                <td>
                    <div class="actions">
                        <a href="/servers/{{ server.id }}/scripts" class="btn btn-primary btn-sm">–°–∫—Ä–∏–ø—Ç—ã</a>
                        <form method="POST" action="/servers/{{ server.id }}/delete" style="display:inline;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä {{ server.name }}?');">
                            <button type="submit" class="btn btn-danger btn-sm">–£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty">
        <p>–°–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–µ—Ä –≤—ã—à–µ.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
